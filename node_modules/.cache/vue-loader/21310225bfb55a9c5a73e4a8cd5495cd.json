{"remainingRequest":"D:\\p\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\p\\vue-admin\\src\\views\\log\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\p\\vue-admin\\src\\views\\log\\index.vue","mtime":1714716372633},{"path":"D:\\p\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714717337779},{"path":"D:\\p\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1714717350786},{"path":"D:\\p\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714717337779},{"path":"D:\\p\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1714717353807}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvUGFnaW5hdGlvbicNCmltcG9ydCB7IGdldExpc3QgfSBmcm9tICdAL2FwaS9sb2cnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFBhZ2luYXRpb24NCiAgfSwNCiAgZmlsdGVyczogew0KICAgIGxldmVsRmlsdGVyKGxldmVsKSB7DQogICAgICBjb25zdCBsZXZlbE1hcCA9IHsNCiAgICAgICAgJ0RFQlVHJzogJ3N1Y2Nlc3MnLA0KICAgICAgICAnSU5GTyc6ICcnLA0KICAgICAgICAnV0FSTklORyc6ICd3YXJuaW5nJywNCiAgICAgICAgJ0VSUk9SJzogJ2RhbmdlcicNCiAgICAgIH0NCiAgICAgIHJldHVybiBsZXZlbE1hcFtsZXZlbF0NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgbGlzdDogW10sDQogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwNCiAgICAgIGxpc3RRdWVyeTogew0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICBsaW1pdDogMjAsDQogICAgICAgIGNyZWF0ZWRfYXQ6IHVuZGVmaW5lZCwNCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQsDQogICAgICAgIGxldmVsOiB1bmRlZmluZWQsDQogICAgICAgIG1ldGhvZDogdW5kZWZpbmVkLA0KICAgICAgICBrZXl3b3JkOiB1bmRlZmluZWQNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5mZXRjaERhdGEoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2VhcmNoKCkgew0KICAgICAgdGhpcy5mZXRjaERhdGEoKQ0KICAgIH0sDQogICAgcmVmcmVzaCgpIHsNCiAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gew0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICBsaW1pdDogMjAsDQogICAgICAgIGNyZWF0ZWRfYXQ6IHVuZGVmaW5lZCwNCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQsDQogICAgICAgIGxldmVsOiB1bmRlZmluZWQsDQogICAgICAgIG1ldGhvZDogdW5kZWZpbmVkLA0KICAgICAgICBrZXl3b3JkOiB1bmRlZmluZWQNCiAgICAgIH0NCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCkNCiAgICB9LA0KICAgIGZldGNoRGF0YSgpIHsNCiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlDQogICAgICBnZXRMaXN0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5pdGVtcw0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbA0KICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/log","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <el-date-picker\r\n        v-model=\"listQuery.created_at\"\r\n        size=\"small\"\r\n        type=\"datetimerange\"\r\n        range-separator=\"-\"\r\n        start-placeholder=\"开始日期\"\r\n        end-placeholder=\"结束日期\"\r\n        value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n        class=\"filter-item\"\r\n        :editable=\"false\"\r\n      />\r\n      <el-select\r\n        v-model=\"listQuery.level\"\r\n        size=\"small\"\r\n        placeholder=\"选择日志级别\"\r\n        clearable\r\n        class=\"filter-item\"\r\n      >\r\n        <el-option label=\"DEBUG\" :value=\"'DEBUG'\" />\r\n        <el-option label=\"INFO\" :value=\"'INFO'\" />\r\n        <el-option label=\"WARNING\" :value=\"'WARNING'\" />\r\n        <el-option label=\"ERROR\" :value=\"'ERROR'\" />\r\n      </el-select>\r\n      <el-select\r\n        v-model=\"listQuery.method\"\r\n        size=\"small\"\r\n        placeholder=\"选择请求方法\"\r\n        clearable\r\n        class=\"filter-item\"\r\n      >\r\n        <el-option label=\"GET\" :value=\"'GET'\" />\r\n        <el-option label=\"POST\" :value=\"'POST'\" />\r\n        <el-option label=\"PUT\" :value=\"'PUT'\" />\r\n        <el-option label=\"PATCH\" :value=\"'PATCH'\" />\r\n        <el-option label=\"DELETE\" :value=\"'DELETE'\" />\r\n      </el-select>\r\n      <el-input\r\n        v-model=\"listQuery.keyword\"\r\n        size=\"small\"\r\n        placeholder=\"请输入关键词\"\r\n        clearable\r\n        class=\"filter-item w-200\"\r\n      />\r\n      <el-button-group class=\"filter-item\">\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-search\"\r\n          @click=\"search\"\r\n        >\r\n          搜索\r\n        </el-button>\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-refresh\"\r\n          @click=\"refresh\"\r\n        >\r\n          重置\r\n        </el-button>\r\n      </el-button-group>\r\n    </div>\r\n\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      element-loading-text=\"Loading\"\r\n      border\r\n      fit\r\n      height=\"100%\"\r\n      class=\"table-container\"\r\n      highlight-current-row\r\n    >\r\n      <el-table-column\r\n        align=\"center\"\r\n        label=\"ID\"\r\n        width=\"95\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.id }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"行为描述\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.title }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"日志级别\"\r\n        width=\"120\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"scope.row.level | levelFilter\">{{ scope.row.level }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"请求方法\"\r\n        width=\"100\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.method }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"响应时间\"\r\n        width=\"100\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.time }} ms\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"IP地址\"\r\n        width=\"130\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.ip }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作人\"\r\n        width=\"100\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.author }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        label=\"操作时间\"\r\n        width=\"160\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.created_at }}</span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total > 0\"\r\n      :total=\"total\"\r\n      :page.sync=\"listQuery.page\"\r\n      :limit.sync=\"listQuery.limit\"\r\n      @pagination=\"fetchData\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from '@/components/Pagination'\r\nimport { getList } from '@/api/log'\r\n\r\nexport default {\r\n  components: {\r\n    Pagination\r\n  },\r\n  filters: {\r\n    levelFilter(level) {\r\n      const levelMap = {\r\n        'DEBUG': 'success',\r\n        'INFO': '',\r\n        'WARNING': 'warning',\r\n        'ERROR': 'danger'\r\n      }\r\n      return levelMap[level]\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      total: 0,\r\n      list: [],\r\n      listLoading: true,\r\n      listQuery: {\r\n        page: 1,\r\n        limit: 20,\r\n        created_at: undefined,\r\n        status: undefined,\r\n        level: undefined,\r\n        method: undefined,\r\n        keyword: undefined\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    search() {\r\n      this.fetchData()\r\n    },\r\n    refresh() {\r\n      this.listQuery = {\r\n        page: 1,\r\n        limit: 20,\r\n        created_at: undefined,\r\n        status: undefined,\r\n        level: undefined,\r\n        method: undefined,\r\n        keyword: undefined\r\n      }\r\n      this.fetchData()\r\n    },\r\n    fetchData() {\r\n      this.listLoading = true\r\n      getList(this.listQuery).then(response => {\r\n        this.list = response.data.items\r\n        this.total = response.data.total\r\n        this.listLoading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}